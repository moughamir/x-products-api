{% extends 'admin/layout/base.html.twig' %}

{% block title %}Settings{% endblock %}
{% block page_title %}Settings{% endblock %}

{% block content %}
<div class="p-6">
    {% if success %}
    <div class="alert alert-success mb-4">
        <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <span>{{ success }}</span>
    </div>
    {% endif %}

    <form method="POST" action="/cosmos/admin/settings" class="space-y-6">
        <!-- General Settings -->
        <div class="card bg-base-100 shadow-md">
            <div class="card-body">
                <h3 class="card-title">General Settings</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="form-control">
                        <label class="label"><span class="label-text">Application Name</span></label>
                        <input type="text" name="app_name" value="{{ settings.general.app_name }}" class="input input-bordered">
                    </div>

                    <div class="form-control">
                        <label class="label"><span class="label-text">Application Description</span></label>
                        <input type="text" name="app_description" value="{{ settings.general.app_description }}" class="input input-bordered">
                    </div>

                    <div class="form-control">
                        <label class="label"><span class="label-text">Timezone</span></label>
                        <input type="text" name="timezone" value="{{ settings.general.timezone }}" class="input input-bordered">
                    </div>

                    <div class="form-control">
                        <label class="label"><span class="label-text">Default Currency</span></label>
                        <input type="text" name="default_currency" value="{{ settings.general.default_currency }}" class="input input-bordered">
                    </div>
                </div>
            </div>
        </div>

        <!-- Display Settings -->
        <div class="card bg-base-100 shadow-md">
            <div class="card-body">
                <h3 class="card-title">Display Settings</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="form-control">
                        <label class="label"><span class="label-text">Items Per Page</span></label>
                        <input type="number" name="items_per_page" value="{{ settings.display.items_per_page }}" class="input input-bordered">
                    </div>

                    <div class="form-control">
                        <label class="label"><span class="label-text">Max Image Size (bytes)</span></label>
                        <input type="number" name="max_image_size" value="{{ settings.display.max_image_size }}" class="input input-bordered">
                    </div>

                    <div class="form-control md:col-span-2">
                        <label class="label"><span class="label-text">Allowed Image Types</span></label>
                        <input type="text" name="allowed_image_types" value="{{ settings.display.allowed_image_types }}" class="input input-bordered">
                        <label class="label"><span class="label-text-alt">Comma-separated file extensions</span></label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Email Settings -->
        <div class="card bg-base-100 shadow-md">
            <div class="card-body">
                <h3 class="card-title">Email Settings (SMTP)</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="form-control">
                        <label class="label"><span class="label-text">SMTP Host</span></label>
                        <input type="text" name="smtp_host" value="{{ settings.email.smtp_host }}" class="input input-bordered">
                    </div>

                    <div class="form-control">
                        <label class="label"><span class="label-text">SMTP Port</span></label>
                        <input type="number" name="smtp_port" value="{{ settings.email.smtp_port }}" class="input input-bordered">
                    </div>

                    <div class="form-control">
                        <label class="label"><span class="label-text">SMTP Username</span></label>
                        <input type="text" name="smtp_username" value="{{ settings.email.smtp_username }}" class="input input-bordered">
                    </div>

                    <div class="form-control">
                        <label class="label"><span class="label-text">SMTP Password</span></label>
                        <input type="password" name="smtp_password" value="{{ settings.email.smtp_password }}" class="input input-bordered">
                    </div>

                    <div class="form-control">
                        <label class="label"><span class="label-text">SMTP Encryption</span></label>
                        <select name="smtp_encryption" class="select select-bordered">
                            <option value="tls" {% if settings.email.smtp_encryption == 'tls' %}selected{% endif %}>TLS</option>
                            <option value="ssl" {% if settings.email.smtp_encryption == 'ssl' %}selected{% endif %}>SSL</option>
                            <option value="" {% if settings.email.smtp_encryption == '' %}selected{% endif %}>None</option>
                        </select>
                    </div>

                    <div class="form-control">
                        <label class="label"><span class="label-text">From Email</span></label>
                        <input type="email" name="from_email" value="{{ settings.email.from_email }}" class="input input-bordered">
                    </div>

                    <div class="form-control md:col-span-2">
                        <label class="label"><span class="label-text">From Name</span></label>
                        <input type="text" name="from_name" value="{{ settings.email.from_name }}" class="input input-bordered">
                    </div>
                </div>
            </div>
        </div>

        <!-- Save Button -->
        <div class="flex gap-4">
            <button type="submit" class="btn btn-primary">Save Settings</button>
        </div>
    </form>
</div>
{% endblock %}

